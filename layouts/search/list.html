{{ define "main" }}


<section class="section">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-10">
        <link href="/pagefind/pagefind-ui.css" rel="stylesheet">
        <script src="/pagefind/pagefind-ui.js"></script>
        
        <h1 style="margin-bottom: 2rem;">ç«™å…§æœå°‹</h1>
        <div id="search"></div>

        <script>
          window.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ– Pagefind UI
            const pf = new PagefindUI({
              element: "#search",
              showImages: true,        // å•Ÿå‹•ç¸®åœ–é¡¯ç¤º
              openFilters: false,      // é è¨­æŠ˜ç–Šéæ¿¾é¢æ¿
              resetStyles: false,
              excerptLength: 30,       // æ‘˜è¦é•·åº¦ç¨å¾®å¢åŠ 

              ranking: {
                termFrequency: 1.0,
                spreading: 1.5,
                termSaturation: 1.4,
                termSimilarity: 0.8,  // å¾ 0.8 æ”¹æˆ 0.5ï¼Œæ›´æ¨¡ç³Š
              },
              // 1. ä¸­æ–‡åŒ–è¨­å®š
              translations: {
                placeholder: "è¼¸å…¥é—œéµå­—æœå°‹...",
                zero_results: "æ‰¾ä¸åˆ°ç›¸é—œå…§å®¹ğŸ‡ğŸ‡ğŸ‡",
                loading: "æœå°‹ä¸­...",
                search_button: "æœå°‹",
                clear_button: "æ¸…é™¤"
                },

              // 2. è‡ªå‹•ä¿®æ­£ç¸®åœ–è·¯å¾‘ï¼ˆé¿å…åœ–ç‰‡ç ´åœ–ï¼‰
              processResult: function (result) {
                if (result.meta.image && !result.meta.image.startsWith('http')) {
                  // è‡ªå‹•è£œå…¨ç¶²ç«™ç¶²å€ï¼Œç¢ºä¿ç¸®åœ–é¡¯ç¤ºæ­£å¸¸
                  result.meta.image = window.location.origin + result.meta.image;
                }
                return result;
              }
            });
          });

          // 3. é»æ“Šçµæœåœ¨æ–°åˆ†é é–‹å•Ÿ
          document.addEventListener('click', function(e) {
            const link = e.target.closest('.pagefind-ui__result-link');
            if (link) {
              e.preventDefault();
              window.open(link.href, '_blank');
            }
          });
        </script>
      </div>
    </div>
  </div>
</section>


<style>
  /* è®“ Pagefind çš„æœå°‹æ¡†å’Œçµæœé©é… Bootstrap ä¸»é¡Œ */
  .pagefind-ui__search-input {
    width: 100%;
    padding: 0.75rem 1rem;
    font-size: 1rem;
    border: 1px solid #ced4da;
    border-radius: 0.25rem;
    margin-bottom: 1.5rem;
  }
  
  .pagefind-ui__search-input:focus {
    outline: none;
    border-color: rgba(111, 202, 209, 82);
  }
  
  .pagefind-ui__result {
    padding: 1.5rem 0;
    border-bottom: 1px solid #dee2e6;
  }
  
  .pagefind-ui__result-title {
    font-size: 1.5rem;
    margin-bottom: 0.5rem;
  }
  
  .pagefind-ui__result-link {
    color: inherit;
    text-decoration: none;
  }
  
  .pagefind-ui__result-link:hover {
    color: black;
    text-decoration: underline;
  }
  
  .pagefind-ui__result-excerpt {
    color: #6c757d;
    margin: 0;
  }
  
  .pagefind-ui__result-excerpt mark {
    background-color: #fff3cd;
    padding: 0.1rem 0.2rem;
    border-radius: 0.2rem;
  }
  
  /* å¦‚æœæœ‰æ¨™ç±¤å’Œåˆ†é¡ */
  .pagefind-ui__result-tags {
    margin-top: 0.5rem;
    font-size: 0.875rem;
  }
  
  .pagefind-ui__button {
    background-color: #007bff;
    color: white;
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 0.25rem;
    cursor: pointer;
  }
  
  .pagefind-ui__button:hover {
    background-color: #0056b3;
  }
  </style>

{{ end }}