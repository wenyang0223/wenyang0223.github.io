{{- $u := urls.Parse .Destination -}}
{{- $dest := .Destination -}}
{{- if (strings.HasSuffix $u.Path ".md") -}}
  {{- $page := .Page.GetPage $u.Path -}}
  {{- if $page -}}
    {{- $dest = $page.RelPermalink -}}
  {{- end -}}
{{- end -}}
<a href="{{ $dest | safeURL }}"{{ with .Title }} title="{{ . }}"{{ end }}>{{ .Text | safeHTML }}</a>