{{ define "main" }}
<section class="section-sm">
  <div class="container pl-1 pr-4">
    <div class="row">
      <div class="col-lg-10 mx-auto">
        
        <div class="mb-4 d-flex justify-content-between align-items-center">
          <a href="/" onclick="if(document.referrer) { window.history.back(); return false; }" class="btn-back-custom">
            ← 返回上一頁
          </a>
          
          <a href="javascript:void(0)" onclick="window.scrollTo({top: document.querySelector('.content').offsetTop + document.querySelector('.content').offsetHeight, behavior: 'smooth'});" class="btn-back-custom">
            ▼ 跳至底部
          </a>
        </div>

        <div class="post-meta mb-2">
          {{ $taxonomies := slice "categories" "clubhouse" "topics" "series" "highlights" "projects" }}
          {{ $isFirst := true }}
          {{ range $tax := $taxonomies }}
            {{ with $.GetTerms $tax }}
              {{ range . }}
                {{ if not $isFirst }}<span class="mx-1 text-muted">|</span>{{ end }}
                <a href="{{ .Permalink }}" class="text-primary font-weight-bold">
                  {{ .LinkTitle }}
                </a>
                {{ $isFirst = false }}
              {{ end }}
            {{ end }}
          {{ end }}
        </div>

        <h2>{{ .Title | markdownify }}</h2>
        
        <div class="mb-3 text-center">
          <span>By {{if .Params.Author}}{{ .Params.Author }}{{else}}{{.Site.Params.Author}}{{end}}</span>
          {{ if not .Params.HideDate }}
          <span class="border-bottom border-primary px-2 mx-1"></span>
          <span>{{ .PublishDate.Format "02 January 2006" }}</span>
          {{ end }}
        </div>

        {{ if .Params.image }}
        <img src="{{ .Params.Image | absURL }}" class="img-fluid w-100 mb-4" alt="{{ .Title | markdownify }}">
        {{ end }}
        
        <div class="content mb-5">
          {{ .Content }}
        </div>

        <hr id="article-end">

        <div class="mt-4 mb-5 d-flex justify-content-between align-items-center">
          <a href="/" onclick="if(document.referrer) { window.history.back(); return false; }" class="btn-back-custom">
            ← 返回上一頁
          </a>
        
          <a href="javascript:void(0)" onclick="window.scrollTo({top: 0, behavior: 'smooth'});" class="btn-back-custom">
            ▲ 回到頂部
          </a>
        </div>


        {{ template "_internal/disqus.html" . }}
      </div>
    </div>
  </div>
</section>

<style>
  .btn-back-custom {
    display: inline-block;
    padding: 8px 20px;
    background-color: transparent;
    color: #2d3133;
    border: 1px solid #ced4da;
    border-radius: 5px;
    text-decoration: none;
    font-size: 16px;
    font-weight: 500;
    transition: all 0.3s ease;
  }
  .btn-back-custom:hover {
    background-color: #f8f9fa;
    color: $primary-color ;
    border-color: $primary-color;
    text-decoration: none;
  }
</style>

<style>
  /* 讓滾動變得滑順 */
  html { 
    scroll-behavior: smooth; 
  }

  /* 標題優化：適合長標題 */
  .post-title {
    line-height: 1.4;
    margin-bottom: 20px;
    font-weight: 700;
  }

  /* 統一按鈕樣式 */
  .btn-back-custom {
    display: inline-flex;
    align-items: center;
    padding: 7px 18px;
    background-color: transparent;
    color: #6c757d;
    border: 1px solid #ced4da;
    border-radius: 4px;
    text-decoration: none !important;
    font-size: 16px;
    font-weight: 500;
    transition: all 0.2s ease;
  }

  .btn-back-custom:hover {
    background-color: #f8f9fa;
    color: $primary-color;
    border-color: $primary-color;
  }

  /* Flex 排版輔助 */
  .d-flex { display: flex !important; }
  .justify-content-between { justify-content: space-between !important; }
  .align-items-center { align-items: center !important; }
</style>
{{ end }}